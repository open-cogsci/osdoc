title: Versionshinweise für 4.0.0
hash: 56a80ee40604aee13d32217708bb0029268d185ffcd2d1d525eceb3a73250187
locale: de
language: German

OpenSesame 4.0 *Melodramatic Milgram* ist eine bedeutende neue Veröffentlichung mit vielen neuen Funktionen und Verbesserungen.

[TOC]

## Wichtig: Rückwärtsinkompatible Änderungen

- Das Protokollieren von Variablen hat sich leicht geändert. Insbesondere werden Variablen, die in der Benutzeroberfläche definiert sind, wie Spalten in einer `loop`-Tabelle oder explizit ausgewählte Variablen in einem `logger`, immer protokolliert. Variablen, die in einem `inline_script` oder `inline_javascript` definiert sind, werden nur protokolliert, wenn sie Zahlen (`int` und `float`), Zeichenketten (`str` und `bytes`) und `None`-Werte sind. Dies soll verhindern, dass Protokolldateien unangemessen groß werden, weil lange Listen und andere große Werte protokolliert werden.
- Der Inhalt von `<script>`-Tags in `inline_html`-Elementen wird nicht ausgewertet. Dies ist nicht mehr erforderlich, da Sie einfach auf experimentelle Variablen in JavaScript verweisen können, wie Sie es auch an anderen Stellen tun würden (siehe unten).
- Bedingte Ausdrücke werden nur als OpenSesame-Skript interpretiert, wenn sie Variablenreferenzen mit eckigen Klammern oder den Wörtern "immer" oder "nie" enthalten. Andernfalls werden sie als Python-Ausdrücke interpretiert, wie unten beschrieben.

## Neues OpenSesame Python-Modul (ohne GUI)

Für diejenigen von Ihnen, die das Programmieren gegenüber der Nutzung einer GUI bevorzugen: Sie können OpenSesame jetzt als Python-Modul verwenden.

```python
from libopensesame.python_workspace_api import \
  Experiment, Canvas, Keyboard, Text

# Experimentfenster mit Legacy-Backend initialisieren
exp, win, clock, log = Experiment(canvas_backend='legacy')
# Stimulus-Canvas und Tastatur vorbereiten
cnv = Canvas()
cnv += Text('Hallo Welt')
kb = Keyboard()
# Zeige das Canvas, warte auf einen Tastendruck und beende das Experiment
cnv.show()
kb.get_key()
exp.end()
```

Siehe auch:

- %link:manual/python/nogui%

## Verbesserte Integration mit Python und JavaScript

Die Integration zwischen OpenSesame und Python (auf dem Desktop) / JavaScript (im Browser) ist jetzt intuitiver. Insbesondere wurde die OpenSesame-spezifische Syntax teilweise durch standardmäßige Python- / JavaScript-Syntax ersetzt, und es gibt keinen Unterschied mehr zwischen experimentellen Variablen und globalen Variablen in Python / JavaScript.


### {} anstelle von []: Unterstützung für formatierte Zeichenketten-Literale (f-strings)

Die bevorzugte Notation zum Verweisen auf Variablen in der Benutzeroberfläche verwendet nun geschweifte Klammern (`{my_var}`) anstelle von eckigen Klammern (`[my_var]`).

Sie können sogar vollständige Python-Ausdrücke innerhalb von geschweiften Klammern einschließen. Zum Beispiel wird der folgende Text auf einem SKETCHPAD den Text "Gut gemacht!" enthalten, wenn die Genauigkeit über 70% liegt, und den Text "Streng dich an!" andernfalls.

```text
Deine Genauigkeit beträgt {acc} %. {'Gut gemacht!' if acc > 70 else 'Streng dich an!'}
```

Beim Ausführen eines Experiments mit OSWeb in einem Browser wird der Python-Code innerhalb geschweifter Klammern automatisch in JavaScript konvertiert. Das bedeutet, dass Sie die gleichen Python-Ausdrücke innerhalb geschweifter Klammern auf dem Desktop und im Browser verwenden können.

Weitere Informationen finden Sie unter:

- <https://docs.python.org/3/reference/lexical_analysis.html#f-strings>

### Unterstützung für Python-ähnliche bedingte Ausdrücke

Die bevorzugte Syntax für Run-if, Break-if, Show-if und andere bedingte Ausdrücke ist Python, anstelle von OpenSesame-Skript. Das bedeutet, dass der folgende Run-if-Ausdruck dazu führt, dass ein Element nur ausgeführt wird, wenn die Variable `correct` gleich 1 ist, also nach einer korrekten Antwort. (Dies hängt auch damit zusammen, dass experimentelle Variablen jetzt global sind, siehe unten.)

```python
correct == 1
```

Beim Ausführen eines Experiments mit OSWeb in einem Browser werden Python-bedingte Ausdrücke automatisch in JavaScript konvertiert. Das bedeutet, dass Sie die gleichen Python Run-if, Break-if, Show-if und andere bedingte Ausdrücke auf dem Desktop und im Browser verwenden können.

### Persistenter JavaScript-Arbeitsbereich

Der JavaScript-Arbeitsbereich ist jetzt persistent. Das bedeutet, dass Sie eine Funktion oder Variable in einem `inline_javascript` definieren und dann in einem anderen `inline_javascript` darauf verweisen können.

### Experimentelle Variablen sind global

Experimentelle Variablen, wie `response_time` und in LOOP-Elementen definierte Variablen, sind jetzt globale Variablen innerhalb von Python und JavaScript. Das bedeutet, dass Sie das `var` (Python) oder `vars`-Objekt nicht mehr verwenden müssen, sondern direkt auf experimentelle Variablen durch ihren Namen Bezug nehmen können.

Python:

```python
# Auf eine vorhandene experimentelle Variable durch ihren Namen zugreifen
print('response = ', response)
# Eine neue experimentelle Variable definieren (die auch im GUI verwendet werden kann)
new_experimental_variable = 'example'
```

JavaScript:

```javascript
// Auf eine vorhandene experimentelle Variable durch ihren Namen zugreifen
console.log('response = ' + response)
// Eine neue experimentelle Variable definieren (die auch im GUI verwendet werden kann)
// Hinweis: Variablen, die mit `let` definiert wurden, sind *nicht* global verfügbar!
var new_experimental_variable = 'example'
```

## Verbesserte Benutzeroberfläche

Es gab einige Verbesserungen in der Benutzeroberfläche:

- Verbesserte Symbole: Die Öffnen- und Speichern-Symbole wurden überarbeitet, da sie von einigen Benutzern als unklar empfunden wurden
- Run-if, break-if, show-if und andere bedingte Ausdrücke sind zur Klarheit annotiert ('Always run')
- OSWeb erscheint nun als Backend
- Elemente, die mit den experimentellen Einstellungen nicht kompatibel sind, werden deaktiviert
- Elemente in einem Experiment können deaktiviert werden. Dies ist hauptsächlich für Entwicklerzwecke sinnvoll, um zum Beispiel die Anweisungen vorübergehend zu deaktivieren.
- Fehlermeldungen sind nun wesentlich informativer
- Eine neue Updater-Erweiterung prüft automatisch auf Aktualisierungen ausgewählter Pakete. Dies bietet eine einfache Möglichkeit, OpenSesame auf dem neuesten Stand zu halten, ohne die Software erneut herunterladen und installieren zu müssen.


## Überlagernde Quest-Treppe

Die Elemente `quest_staircase_init` und `quest_staircase_next` akzeptieren jetzt einen Namen, der es Ihnen ermöglicht, mehrere Quest-Verfahren parallel auszuführen. Dies ist hauptsächlich nützlich, wenn Sie unabhängige, überlagernde Quest-Verfahren für verschiedene experimentelle Bedingungen ausführen möchten.


## Für Entwickler: Verbesserte Plugin- und Erweiterungs-API

Die Plugin- und Erweiterungs-API wurde vereinfacht und überarbeitet, um die aktuellen Best Practices in der Python-Entwicklung widerzuspiegeln:

- %link:dev/plugin%
- %link:dev/extension%